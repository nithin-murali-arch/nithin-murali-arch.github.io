(this["webpackJsonpzendesk-test"]=this["webpackJsonpzendesk-test"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports={app_tab:"App_app_tab__25YOI",date_placeholder:"App_date_placeholder__2i5RQ",image_ctr:"App_image_ctr__2ISEy",days_image:"App_days_image__aCM9e"}},,,,,function(e,t,a){e.exports=a(24)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),c=a.n(s);a(16),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(9),o=a.n(i),l=a(1),h=a(2),u=a(4),d=a(3),m=a(5),g=a(6),p=a.n(g),f=a(10),v=(a(18),a(19),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"popover-ctr pA",style:{left:"".concat(this.state.left,"px"),top:"".concat(this.state.top,"px")}},this.props.children)}}],[{key:"getDerivedStateFromProps",value:function(e,t){t={};var a=e.parentElement;return a&&(t.left=a.offsetLeft+a.clientWidth/2-10,t.top=a.offsetTop+a.clientHeight+10),t}}]),t}(n.Component)),y=function(){var e=function(e,t,a,n){return new Promise((function(r,s){var c=new XMLHttpRequest;c.open(e,t,!0),Object.keys(n).forEach((function(e){c.setRequestHeader(e,n[e])})),c.onload=function(e){var t=c.getAllResponseHeaders().trim().split(/[\r\n]+/),a={};t.forEach((function(e){var t=e.split(": "),n=t.shift(),r=t.join(": ");a[n]=r})),"application/json"===a["content-type"]?r(JSON.parse(e.target.response)):r(e.target.response)},c.onerror=function(e){s(e)},c.send(a)}))};return{makeApiCall:e,loadNasaImage:function(t){var a="https://api.nasa.gov/planetary/apod?api_key=8tKXFJvk4bzxmNizdRyj62p8ouqTEIo4LCoJO7FP&date=".concat(t);return e("GET",a,null,{"Cache-Control":"max-age=3600"})}}}(),b=(a(20),function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={};var n=e.targetElement.getAttribute("value");return y.loadNasaImage(n).then((function(e){a.unMounted||(a.setState({imageURL:e.url}),a.props.imagesCache[n]={url:e.url,explanation:e.explanation})})),a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"componentWillUnmount",value:function(){this.unMounted=!0}},{key:"imageLoadErroHandler",value:function(){this.setState({imageURL:"https://www.elegantthemes.com/blog/wp-content/uploads/2016/03/500-internal-server-error-featured-image-1.png"})}},{key:"render",value:function(){var e,t=this;return e=this.state.imageURL?r.a.createElement("div",{className:"image-ctr"},r.a.createElement("img",{onError:function(e){return t.imageLoadErroHandler(e)},src:this.state.imageURL,className:"image-thumbnail",alt:"Nasa's image of the day"})):r.a.createElement("div",{className:"loader-ctr"},r.a.createElement("div",{className:"loader image-thumbnail"})),r.a.createElement(v,{parentElement:this.props.targetElement},e)}}]),t}(n.Component)),E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"getDaysInMonth",value:function(e,t){return 1===e&&t%4===0?29:1===e?28:[0,2,4,6,7,9,11].includes(e)?31:30}},{key:"numberRangeToArray",value:function(e,t){for(var a=[],n=e;n<=t;n++)a.push(n);return a}},{key:"convertToObj",value:function(e,t){var a="".concat(e.year,"-").concat(this.padZero(e.month+1),"-").concat(this.padZero(t)),n=this.state.today;n.setHours(0,0,0,0);var r=new Date(a);r.setHours(0,0,0,0);var s="".concat(this.state.chosenYear,"-").concat(this.padZero(this.state.chosenMonth+1),"-").concat(this.padZero(this.state.chosenDate)),c=new Date(s);return c.setHours(0,0,0,0),{type:e.type,month:e.month,year:e.year,isToday:r.getTime()===n.getTime(),isSelected:r.getTime()===c.getTime(),dateNotation:a,value:t}}},{key:"dateMouseoverHandler",value:function(e){e.target.classList.contains("date-item")&&!e.target.classList.contains("disabled")&&this.state.targetElement!==e.target&&this.setState({targetElement:e.target})}},{key:"dateMouseoutHandler",value:function(e){e.target.classList.contains("date-item")&&this.setState({targetElement:null})}},{key:"padZero",value:function(e){return"0".concat(e).slice(-2)}},{key:"shouldDisableDate",value:function(e){var t=new Date(e);return t.setHours(0,0,0,0),t>this.props.today?"disabled":""}},{key:"clickHandler",value:function(e){if(e.target.classList.contains("date-item")&&!e.target.classList.contains("disabled")){var t=new Date(e.target.getAttribute("value"));this.state.updateParentState({chosenDate:t.getDate(),chosenMonth:t.getMonth(),chosenYear:t.getFullYear()})}}},{key:"render",value:function(){var e=this,t=this.getDaysInMonth(this.state.calendarMonth,this.state.calendarYear),a=new Date("".concat(this.state.calendarYear,"-").concat(this.props.formatMonth(this.state.calendarMonth),"-01")),n=a.getDay();a.setDate(t);var s,c=a.getDay(),i=[];if(0!==n){var o=this.props.getPrevMonth(this.state.calendarMonth,this.state.calendarYear),l=o.chosenYear,h=o.chosenMonth,u=l||this.state.calendarYear;s=this.getDaysInMonth(h,u),i=i.concat(this.numberRangeToArray(s-n+1,s).map(this.convertToObj.bind(this,{type:"passive",month:h,year:u})))}if(i=i.concat(this.numberRangeToArray(1,t).map(this.convertToObj.bind(this,{type:"active",month:this.state.calendarMonth,year:this.state.calendarYear}))),6!==c){var d=this.props.getNextMonth(this.state.chosenMonth,this.state.chosenYear),m=d.chosenYear,g=d.chosenMonth,p=m||this.state.chosenYear;s=this.getDaysInMonth(g,p),i=i.concat(this.numberRangeToArray(1,6-c).map(this.convertToObj.bind(this,{type:"passive",month:g,year:p})))}var f=this.state.targetElement?r.a.createElement(b,{imagesCache:this.state.imagesCache,targetElement:this.state.targetElement}):null;return r.a.createElement("div",{className:"datepicker pR flex--column",onClick:function(t){return e.clickHandler(t)},onMouseOver:function(t){return e.dateMouseoverHandler(t)},onMouseOut:function(t){return e.dateMouseoutHandler(t)}},r.a.createElement("div",{className:"header flex--row"},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((function(e){return r.a.createElement("div",{key:e,className:"day-item flex--row-acall"},e)}))),r.a.createElement("div",{className:"dates pR flex--column"},i.map((function(t){return r.a.createElement("div",{key:t.dateNotation,value:t.dateNotation,className:[t.type,e.shouldDisableDate(t.dateNotation),t.isToday?"today":"",t.isSelected?"selected":"","flex--row-acall","cp","date-item"].join(" ")},t.value)})),f))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(n.Component),k=(a(21),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"generic-calendar"},this.props.children)}}]),t}(n.Component)),M=(a(22),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"clickHandler",value:function(e){e.target.classList.contains("calendar-month")&&this.props.updateParentState({calendarMonth:parseInt(e.target.getAttribute("value")),view:"calendar"})}},{key:"isCurrentMonth",value:function(e,t){return e===this.props.calendarMonth&&this.props.calendarYear===this.props.chosenYear}},{key:"render",value:function(){var e=this;return r.a.createElement(k,null,r.a.createElement("div",{onClick:function(t){return e.clickHandler(t)},className:"calendar-container"},this.props.months.map((function(t,a){return r.a.createElement("div",{className:["calendar-month cp",e.isCurrentMonth(a)?"selected":""].join(" "),value:a,key:t},t)}))))}}]),t}(n.Component)),j=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(n.Component),O=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){this.props;return r.a.createElement(k,null)}}]),t}(n.Component),S=(a(23),function(e){function t(e){var a;Object(l.a)(this,t),a=Object(u.a)(this,Object(d.a)(t).call(this,e));var n=new Date;return a.state={currentMonth:n.getMonth(),currentDate:n.getDate(),currentYear:n.getFullYear(),chosenYear:n.getFullYear(),chosenMonth:n.getMonth(),calendarMonth:n.getMonth(),calendarYear:n.getFullYear(),today:n,chosenDate:n.getDate(),view:"calendar",yearRangeStart:n.getFullYear()-9,yearRangeEnd:n.getFullYear(),centuryRangeStart:n.getFullYear()-n.getFullYear()%100+1,centuryRangeEnd:n.getFullYear()-n.getFullYear()%100+100,months:["January","February","March","April","May","June","July","August","September","October","November","December"],imagesCache:a.props.imagesCache},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"updateState",value:function(e,t){var a,n=this;"object"===typeof e?a=e:(a={})[e]=t,this.setState(a,(function(){if(a.chosenMonth||a.chosenDate||a.chosenYear){var e="0".concat(n.state.chosenMonth+1).slice(-2),t="0".concat(n.state.chosenDate).slice(-2);n.props.updateImage("".concat(n.state.chosenYear,"-").concat(e,"-").concat(t))}}))}},{key:"changeView",value:function(){new Date;"monthPicker"!==this.state.view&&this.setState(Object(f.a)({view:"monthPicker"},{}))}},{key:"getNextMonth",value:function(e,t){return 11===e?{chosenMonth:0,chosenYear:t+1}:{chosenMonth:e+1}}},{key:"getPrevMonth",value:function(e,t){return 0===e?{chosenMonth:11,chosenYear:t-1}:{chosenMonth:e-1}}},{key:"calendarActionsHandler",value:function(e){if("calendar"===this.state.view)switch(e){case"right":var t=this.getNextMonth(this.state.calendarMonth,this.state.calendarYear),a=t.chosenMonth,n=t.chosenYear,r={calendarMonth:a};n&&(r.calendarYear=n),this.setState(r);break;case"left":var s=this.getPrevMonth(this.state.calendarMonth,this.state.calendarYear),c=s.chosenMonth,i=s.chosenYear,o={calendarMonth:c};i&&(o.calendarYear=i),this.setState(o);break;case"hard-right":this.setState({calendarYear:this.state.calendarYear+1});break;case"hard-left":this.setState({calendarYear:this.state.calendarYear-1})}else if("monthPicker"===this.state.view)switch(e){case"right":this.setState({calendarYear:this.state.calendarYear+1});break;case"left":this.setState({calendarYear:this.state.calendarYear-1});break;case"hard-right":this.setState({calendarYear:this.state.calendarYear+10});break;case"hard-left":this.setState({calendarYear:this.state.calendarYear-10})}else if("yearPicker"===this.state.view)switch(e){case"right":this.setState({yearRangeStart:this.state.yearRangeStart+10,yearRangeEnd:this.state.yearRangeEnd+10});break;case"left":this.setState({yearRangeStart:this.state.yearRangeStart-10,yearRangeEnd:this.state.yearRangeEnd-10});break;case"hard-right":this.setState({yearRangeStart:this.state.yearRangeStart+100,yearRangeEnd:this.state.yearRangeEnd+100});break;case"hard-left":this.setState({yearRangeStart:this.state.yearRangeStart-100,yearRangeEnd:this.state.yearRangeEnd-100})}else if("centuryPicker"===this.state.view)switch(e){case"right":this.setState({centuryRangeStart:this.state.centuryRangeStart+100,centuryRangeEnd:this.state.centuryRangeEnd+100});break;case"left":this.setState({centuryRangeStart:this.state.centuryRangeStart-100,centuryRangeEnd:this.state.centuryRangeEnd-100})}}},{key:"topBarEventHandler",value:function(e){e.target.classList.contains("center")?this.changeView():e.target.classList.contains("hard-right")?this.calendarActionsHandler("hard-right"):e.target.classList.contains("hard-left")?this.calendarActionsHandler("hard-left"):e.target.classList.contains("left")?this.calendarActionsHandler("left"):e.target.classList.contains("right")&&this.calendarActionsHandler("right")}},{key:"formatMonth",value:function(e){return this.state.months[e]}},{key:"render",value:function(){var e,t,a=this;switch(this.state.view){case"calendar":e=r.a.createElement(E,Object.assign({},this.state,{formatMonth:this.formatMonth.bind(this),getPrevMonth:this.getPrevMonth,getNextMonth:this.getNextMonth,updateParentState:this.updateState.bind(this)})),t="".concat(this.formatMonth(this.state.calendarMonth)," ").concat(this.state.calendarYear);break;case"monthPicker":e=r.a.createElement(M,Object.assign({},this.state,{updateParentState:this.updateState.bind(this)})),t=this.state.calendarYear;break;case"yearPicker":e=r.a.createElement(j,Object.assign({},this.state,{updateParentState:this.updateState.bind(this)})),t="".concat(this.state.yearRangeStart," - ").concat(this.state.yearRangeEnd);break;default:e=r.a.createElement(O,Object.assign({},this.state,{updateParentState:this.updateState.bind(this)})),t="".concat(this.state.centuryRangeStart," - ").concat(this.state.centuryRangeEnd)}return r.a.createElement("div",{className:"calendar-ctr flex--column"},r.a.createElement("div",{className:"calendar-topbar flex--row-ac",onClick:function(e){return a.topBarEventHandler(e)}},r.a.createElement("div",{className:"left-box flex--row-ac"},r.a.createElement("div",{className:["hard-left cp flex--row-acall","centuryPicker"===this.state.view?"dn":""].join(" ")},"<<"),r.a.createElement("div",{className:"left cp flex--row-acall"},"<")),r.a.createElement("div",{className:"center cp flex--one flex--row-acall"},t),r.a.createElement("div",{className:"right-box  flex--row-ac cp"},r.a.createElement("div",{className:["hard-right cp flex--row-acall","centuryPicker"===this.state.view?"dn":""].join(" ")},">>"),r.a.createElement("div",{className:"right flex--row-acall cp"},">"))),r.a.createElement("div",{className:"date-component-ctr"},e))}}]),t}(n.Component)),w=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(u.a)(this,Object(d.a)(t).call(this,e));var n=new Date;a.state={};var r="0".concat(n.getMonth()+1).slice(-2),s="0".concat(n.getDate()).slice(-2);return a.state.date="".concat(n.getFullYear(),"-").concat(r,"-").concat(s),a.state.zafClient=ZAFClient.init(),a.imagesCache={},a.updateChosenDate(a.state.date),a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"updateChosenDate",value:function(e){var t,a=this;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:(t=this.imagesCache[e])?this.setState({imageURL:t.url,date:e,description:t.explanation}):y.loadNasaImage(e).then((function(t){a.setState({imageURL:t.url,date:e,description:t.explanation})}));case 2:case"end":return n.stop()}}),null,this)}},{key:"launchModal",value:function(){var e=this;this.state.zafClient.invoke("instances.create",{location:"modal",url:"assets/image.html#"+encodeURIComponent(this.state.imageURL)}).then((function(t){var a=e.state.zafClient.instance(t["instances.create"][0].instanceGuid);a.invoke("resize",{width:"80vw",height:"80vh"}),a.on("modal.close",(function(){}))}))}},{key:"imageErrorHandler",value:function(){this.setState({imageURL:"https://www.elegantthemes.com/blog/wp-content/uploads/2016/03/500-internal-server-error-featured-image-1.png"})}},{key:"render",value:function(){var e=this,t=this.state.imageURL?r.a.createElement("img",{title:this.state.description,onError:function(t){return e.imageErrorHandler(t)},onClick:function(t){return e.launchModal(t)},src:this.state.imageURL,className:p.a.days_image,alt:"NASA photography"}):r.a.createElement("div",{className:"loader"});return r.a.createElement("div",{className:p.a.app_tab},r.a.createElement("div",{className:p.a.image_ctr},r.a.createElement("span",{className:p.a.date_placeholder},"NASA's Photo of the Day - ",this.state.date),t),r.a.createElement("div",{className:p.a.calendar_ctr},r.a.createElement(S,{imagesCache:this.imagesCache,updateImage:this.updateChosenDate.bind(this)})))}}]),t}(n.Component);c.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[11,1,2]]]);
//# sourceMappingURL=main.e7ab9a74.chunk.js.map